---
import ProtectCSR from './ProtectCSR.astro';
import ProtectSSR from './ProtectSSR.astro';
// @ts-expect-error: Virtual module
import { isStaticOutput } from "virtual:@clerk/astro/config";
import type { ProtectProps } from '../../types';

type Props = ProtectProps & {
  isStatic?: boolean
}

const { isStatic, ...props } = Astro.props;

const ProtectComponent = isStaticOutput(isStatic) ? ProtectCSR : ProtectSSR;
---

<ProtectComponent {...props}>
  <slot />
  <slot name="fallback" slot="fallback" />
</ProtectComponent>
